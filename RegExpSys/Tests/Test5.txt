Z = (a|(b|a))X
Y = aZ + bY
X = aX + bZ